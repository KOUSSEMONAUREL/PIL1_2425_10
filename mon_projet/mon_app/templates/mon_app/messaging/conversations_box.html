{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Messagerie - IFRI Covoiturage</title>
  <link rel="stylesheet" href="{% static 'mon_app/style.css' %}">
</head>
<body>
  <header>
    <div class="logo">📨 Messagerie</div>
    <nav>
      <ul>
        <li><a href="{% url 'home' %}">🏠 Accueil</a></li>
        <li><a href="{% url 'list_offers' %}">🔍 Rechercher</a></li>
        <li><a href="{% url 'creer_offre' %}">➕ Publier</a></li>
        <li><a href="{% url 'profil' %}">👤 Profil</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <h2>📬 Vos conversations</h2>

    {% if conversations %}
      <ul class="conversations-list">
        {% for user, message in conversations.items %}
          <li>
            <a href="{% url 'chat_with_user' uid=user.id %}">
              💬 {{ user.first_name }} {{ user.last_name }} — {{ message.content|truncatewords:8 }} ({{ message.timestamp|date:"d M Y H:i" }})
            </a>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Vous n'avez encore aucune conversation.</p>
    {% endif %}
  </main>
</body>
</html>
